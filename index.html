<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Monitoreo LDR</title>
    <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>

    <style>
     h1{
      color: #2093aaff;
     }
    </style>
  </head>

  <body>
    <h1>Lectura Sensor LDR (Simulado)</h1>

    <div class="card">
      <div class="label">Valor LDR</div>
      <div class="value" id="ldr">-</div>
    </div>

    <script>
      //const client = mqtt.connect("ws://10.59.28.113:9001"); // tu IP local y puerto WebSockets {% endcomment %}
      //const client = mqtt.connect("wss://test.mosquitto.org:8081/mqtt");//Para el simulador
      const client = mqtt.connect("wss://test.mosquitto.org:8081");//Para el broker online

      client.on("connect", () => {
        console.log("HTML conectado al broker");
        client.subscribe("ldr/light_percent");
      });

      client.on("message", (topic, message) => {
        document.getElementById("ldr").innerText = message.toString();
      });
    </script>
  </body>
</html>
